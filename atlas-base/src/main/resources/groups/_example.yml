group:
  name: "lobby"
  display-name: "Lobby Servers"
  priority: 0

  server:
    type: "dynamic" # or static
    naming:
      identifier: "uuid" # or numeric
      naming-pattern: "lobby-{id}"
    min-servers: 2
    max-servers: 10

  scaling:
    type: "normal"
    conditions:
      scale-up-threshold: 0.8 # 80% capacity
      scale-down-threshold: 0.3 # 30% capacity

      # Scale up when no servers match this condition (e.g., no waiting games)
      #scale-up-metadata-condition: "game_status=WAITING OR game_status=PREPARING"
      
      # Protect servers matching this condition from being scaled down
      #scale-down-protected-condition: "game_status=IN_PROGRESS OR game_status=STARTING OR players>0"

  templates:
    - "global/server"
    - "lobby/default"

  service-provider:
    docker:
      image: "openjdk:21-jre-slim"
      memory: "2G"
      cpu: "1.0"
      command: "java -Xmx1536M -Xms1536M -jar server.jar nogui"
      working-directory: "/data"
      environment:
        VERSION: "1.21.5"
      # Optional: Additional volume mounts using Docker bind format
      # volumes:
      #   - "/host/path:/container/path:ro"  # Read-only mount
      #   - "/host/configs:/configs:rw"      # Read-write mount
      #   - "/host/shared:/shared"           # Default is read-write
      # Optional: Additional ports to expose
      # ports:
      #   - "8123:8123"  # Expose port 8123 for Dynmap

# Cron jobs for automated server management
# cron-jobs:
#   - name: "graceful-restart"
#     schedule: "0 4 * * *"  # Daily at 4 AM
#     target: "servers"
#     steps:
#       - delay: 0
#         action-type: "server-command"
#         server-command:
#           command: "say [SERVER] Restart in 5 minutes! Please finish up."
#       - delay: 300  # 5 minutes later
#         action-type: "server-command"
#         server-command:
#           command: "say [SERVER] Restart in 1 minute!"
#       - delay: 60   # 1 minute later
#         action-type: "server-control"
#         server-control:
#           action: "restart"
#     enabled: false
#
